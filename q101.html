<style>
  .correct {
    background-color: #d4efdf;
    font-weight: bold;
    color: #145a32;
  }
</style>

<script>
  const questions = [];
  for (let i = 1; i <= 50; i++) {
    questions.push({
      q: `ข้อ ${i}: ข้อใดถูกต้องเกี่ยวกับการบริหารวิชาการ?`,
      options: [
        "ก. บริหารเพื่อสนองคุณภาพเพียงอย่างเดียว",
        "ข. บริหารเน้นการจัดซื้ออุปกรณ์",
        "ค. บริหารที่ส่งเสริมการเรียนรู้ผู้เรียน",
        "ง. บริหารโดยไม่ต้องใช้ข้อมูลสารสนเทศ",
      ],
      answer: 2 // ข้อ ค
    });
  }

  const container = document.getElementById("questions");
  questions.forEach((q, index) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<p>${q.q}</p>`;
    const opts = q.options.map((opt, i) => `
      <label data-index="${i}" data-question="${index}">
        <input type="radio" name="q${index}" value="${i}"> ${opt}
      </label>
    `).join('');
    div.innerHTML += `<div class="options">${opts}</div>`;
    container.appendChild(div);
  });

  document.getElementById("quizForm").addEventListener("submit", function(e) {
    e.preventDefault();
    let score = 0;
    questions.forEach((q, index) => {
      const selected = document.querySelector(`input[name=q${index}]:checked`);
      const labels = document.querySelectorAll(`label[data-question="${index}"]`);
      labels.forEach(label => {
        label.classList.remove("correct"); // ล้างก่อน
      });

      if (selected && parseInt(selected.value) === q.answer) {
        score++;
      }

      // ทำ highlight เฉลย
      const correctLabel = document.querySelector(`label[data-question="${index}"][data-index="${q.answer}"]`);
      if (correctLabel) {
        correctLabel.classList.add("correct");
      }
    });

    document.getElementById("result").innerText = `คุณได้คะแนน ${score} จาก 50 คะแนน (${(score*2).toFixed(0)}%)`;
  });
</script>
